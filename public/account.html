<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Account</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/fonts/simple-line-icons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="assets/css/untitled.css">
</head>

<body>
    <nav class="navbar navbar-light navbar-expand bg-light navigation-clean">
        <div class="container"><a class="navbar-brand" href="#" style="padding-right: 25px;">Covid Link Biz</a><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"></button>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="nav navbar-nav">
                    <li class="nav-item" role="presentation"><a class="nav-link" href="/businesses.html">Businesses</a></li>
                    <li class="nav-item" role="presentation"><a class="nav-link" href="/volunteers.html">Volunteers</a></li>
                    <li class="nav-item" role="presentation"><a class="nav-link" href="/account.html">Account<i class="fa fa-user" style="padding-left: 3px;"></i></a></li>
                </ul>
            </div><a class="btn btn-primary ml-auto" role="button" href="/sign.html">Sign In/Sign Up</a></div>
    </nav><!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

    <h1>Sup ya'll this is going to be where the user enters their data (1st time sign up), and after that, they can see their existing data and change what they want to change</h1>
    <div>
        <p></p>
        <p></p>

        <h3>Toggle: my volunteer profile/my business profile</h3>

        <div class="Entry-Field">
                <div id="biz">
                   <input class="service" /> 
                     
                
                </div>
                <div id="Results">
            
                </div>
            
            </div>
   </div>

<!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.13.0/firebase-app.js"></script>

<!-- Add Firebase products that you want to use -->
<script src="https://www.gstatic.com/firebasejs/7.13.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.13.0/firebase-firestore.js"></script>
<!-- Previously loaded Firebase SDKs -->
<script src="/assets/js/setup.js"></script>
<script>
    var db = firebase.firestore()

    var user = firebase.auth().currentUser;
    var in_name, in_email, in_photoUrl, uid, emailVerified;

    if (user != null) {
        in_name = user.displayName;
        in_email = user.email;
        in_photoUrl = user.photoURL;
        emailVerified = user.emailVerified;
        uid = user.uid;  // The user's ID, unique to the Firebase project. Do NOT use
        // this value to authenticate with your backend server, if
        // you have one. Use User.getToken() instead.
    } 



    function savebiz() {
        in_data = document.getElementById("biz");
        in_bizName = in_data.getElementById("biz-name");
        raw_services = in_data.getElementsByID("service");
        in_about = in_data.getElementById("about")

        in_Address = in_data.getElementById("Address");
        in_services = [];
        for (i = 0; i < raw_services.length; i++) {
            var s = raw_services[i];
            if (s.checked) {
                in_services.append(s.innerText);
            }
        }
        db.collection("businesses").doc(uid).set({
            name: in_name,
            email: in_email,
            photoURL: in_photoUrl,
            bizName: in_bizName,
            services: in_services,
            address: in_address,
            about: in_about
        }); 
        

    }

    function saveVol() {
        in_data = document.getElementById("vol");
        raw_services = in_data.getElementsByClass("service");
        in_address = in_data.getElementById("Address");
        in_services = [];
        for (i = 0; i < raw_services.length; i++) {
            var s = raw_services[i];
            if (s.checked) {
                in_services.append(s.innerText);
            }
        }
        db.collection("businesses").doc(uid).set({
            name: in_name,
            email: in_email,
            photoURL: in_photoUrl,
            services: in_services,
            town: in_town,
            state: in_state,
        });


    }



</script>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bs-init.js"></script>
</body>

</html>