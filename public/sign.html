<!DOCTYPE html>
<html class="text-center">

<head>
    <script src="/assets/js/jquery.min.js"></script>
    <title>Sign - CovidBizLink</title>
    <script src="/assets/js/loadtemplate.js"></script>
</head>

<body>
    <div id="navbar"></div>

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.13.0/firebase-app.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/7.13.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-analytics.js"></script>


    <script>
        // TODO: Replace the following with your app's Firebase project configuration
        var firebaseConfig = {
        apiKey: "AIzaSyD-_Zm5y-K8xINw3m9eDeHBnAE4DqtSv50",
        authDomain: "covidsmallbizlink.firebaseapp.com",
        databaseURL: "https://covidsmallbizlink.firebaseio.com",
        projectId: "covidsmallbizlink",
        storageBucket: "covidsmallbizlink.appspot.com",
        appId: "1:131149431483:web:20f64b67ec10c9c53c1f9e",
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        firebase.auth().onAuthStateChanged(function(user){
            if (user != null) {
                // Name, email address etc
                var name = user.displayName;
                var email = user.email;
                console.log("yes");
                console.log(name);

                b = document.getElementById("sign-btn");
                b.style.display = "none";

                document.getElementById("account-welcome").innerText = "Hello, " + name;
                document.getElementById("account-drop").style.display = "";
            }
        });
    </script>
    <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />


<script>
    // REFERENCE: https://firebase.google.com/docs/auth/web/firebaseui
    
    // Initialize the FirebaseUI Widget using Firebase.
    var ui = new firebaseui.auth.AuthUI(firebase.auth());
    
    var uiConfig = {
      callbacks: {
        signInSuccessWithAuthResult: function(authResult, redirectUrl) {
          // User successfully signed in.
          // Return type determines whether we continue the redirect automatically
          // or whether we leave that to developer to handle.
          return true;
        },
        uiShown: function() {
          // The widget is rendered.
          // Hide the loader.
          document.getElementById('loader').style.display = 'none';
        }
      },
      // Will use popup for IDP Providers sign-in flow instead of the default, redirect.
      //signInFlow: 'popup',
      signInSuccessUrl: '/account.html',
      signInOptions: [
        // Leave the lines as is for the providers you want to offer your users.
        firebase.auth.EmailAuthProvider.PROVIDER_ID
      ],
      // Terms of service url.
      tosUrl: '/terms.html',
      // Privacy policy url.
      privacyPolicyUrl: 'privacy.html'
    };
    
    ui.start('#firebaseui-auth-container', uiConfig);
    
    
</script>

    <div id="container"><img class="img-fluid flex-grow-1" id="background-img" src="assets/img/bg-masthead.jpg" style="opacity: 1;width: 100%;">
        <div id="login-div" style="width: 100%;padding-top: 16px;">
            <h2 class="text-center" style="color: rgb(0, 0, 0);">Sign In / Sign Up</h2>
            <div id="firebaseui-auth-container"></div>
            <div id="loader">
                <p class="text-center">Loading...</p>
            </div>
        </div>
    </div>
    <footer class="footer bg-light"></footer>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bs-init.js"></script>
    <script src="assets/js/dbload.js"></script>
</body>

</html>
